# 数据收集方案

## 📌 文档说明

本文档详细说明英雄联盟大乱斗AI助手的数据收集方案，包括各种数据来源、质量要求、推荐方案和实用建议。

---

## 🎯 数据质量要求

### 理想的大乱斗录像特征

**玩家水平**：
- ✅ 钻石段位以上（推荐挑战者/宗师）
- ✅ 高KDA（3.0以上）
- ✅ 高胜率（60%以上）
- ✅ 多样化打法（激进、保守等）

**录像特征**：
- ✅ 完整对局（从选人到游戏结束）
- ✅ 无卡顿、无重连、网络稳定
- ✅ 1920x1080或更高分辨率
- ✅ 文件完整（无损坏）

**英雄多样性**：
- ✅ 每个英雄多局（10-20局最佳）
- ✅ 不同英雄类型（坦克/法师/射手/刺客/辅助）
- ✅ 对应的英雄配置完整

---

## 🌐 数据来源详解

### 1. 🏆 TLoL数据集（推荐⭐⭐⭐⭐⭐）

**基本信息**：
- **来源**：GitHub开源项目
- **地址**：https://github.com/MiscellaneousStuff/tlol
- **数量**：833场对局
- **质量**：欧服挑战者级别（最高段位）
- **英雄**：专注金克斯（Jinx）一个英雄
- **模式**：排位赛（召唤师峡谷）
- **格式**：已预处理的训练数据
- **文件大小**：约10-50MB/局

**优点**：
- ✅ 质量极高（挑战者玩家）
- ✅ 已经过复杂处理流程
- ✅ 包含完整的游戏帧数据
- ✅ 开源，可免费下载
- ✅ 可用于学习录像解析流程

**缺点**：
- ❌ 不是大乱斗模式（是召唤师峡谷）
- ❌ 只有1个英雄（金克斯）
- ❌ 文件较大（需要筛选）
- ❌ 不适合直接用于大乱斗训练

**适用场景**：
- 学习录像解析流程
- 测试模型架构
- 作为辅助数据集
- 理解数据处理流程

**如何使用**：
```bash
# 1. 克隆仓库
git clone https://github.com/MiscellaneousStuff/tlol.git

# 2. 下载数据集
# 查看README中的数据集下载链接

# 3. 筛选有用数据
# 虽然不是大乱斗，但可以用于测试代码框架
```

---

### 2. 📦 HuggingFace数据集（推荐⭐⭐⭐⭐⭐）

**基本信息**：
- **来源**：HuggingFace数据平台
- **地址**：https://huggingface.co/datasets/maknee/league-of-legends-decoded-replay-packets
- **数量**：700,000+局录像
- **大小**：1TB+数据
- **质量**：各个段位（从青铜到宗师）
- **英雄**：所有英雄都有
- **模式**：多种模式（可能包含大乱斗）
- **格式**：解码后的数据包

**优点**：
- ✅ 数据量巨大（700k+局）
- ✅ 英雄覆盖全面
- ✅ 可能有模式筛选（ARAM）
- ✅ 免费下载
- ✅ 包含多段位数据
- ✅ 格式统一

**缺点**：
- ❌ 数据量太大（需要筛选）
- ❌ 需要自己处理和筛选大乱斗
- ❌ 可能需要大量硬盘空间（1TB）
- ❌ 下载时间长
- ❌ 需要数据筛选能力

**适用场景**：
- 筛选大乱斗录像（主要）
- 获取多英雄数据
- 大规模训练
- 跨段位数据分析

**如何使用**：
```python
# 1. 安装HuggingFace库
pip install datasets

# 2. 下载数据集
from datasets import load_dataset

dataset = load_dataset("maknee/league-of-legends-decoded-replay-packets")

# 3. 筛选大乱斗模式
aram_data = dataset.filter(lambda x: x['mode'] == 'ARAM')

# 4. 按英雄筛选
lux_data = aram_data.filter(lambda x: x['hero'] == 'Lux')

# 5. 下载部分数据（避免全量下载）
# 可以指定shard数量
```

**筛选策略**：
- 只下载大乱斗模式（ARAM）
- 下载前100-200局（测试）
- 选择特定英雄
- 选择高段位对局

---

### 3. 🎮 自己录制（最推荐⭐⭐⭐⭐⭐）

**基本信息**：
- **来源**：自己玩大乱斗
- **工具**：游戏内置录像功能
- **格式**：.rofl文件
- **位置**：`C:\Riot Games\League of Legends\Replays`

#### 录制步骤

**a) 开启自动录像**
```
游戏内步骤：
1. 打开设置（ESC）
2. 点击"视频"选项
3. 勾选"自动保存录像"
4. 确认录像位置：C:\Riot Games\League of Legends\Replays
```

**b) 玩大乱斗模式**
- 选择10-15个常用英雄
- 每个英雄玩10-20局
- 尽量打得好一点（提升数据质量）
- 记录每局的基本信息（英雄、段位、KDA等）

**c) 收集录像文件**
```bash
# 录像文件位置
C:\Riot Games\League of Legends\Replays\

# 文件格式
2024-01-20_12-30-45_EUW1_641123456.rofl
^日期      ^时间  ^服务器 ^对局ID

# 文件大小：每局约10-50MB
```

**d) 复制到项目目录**
```bash
# 创建项目目录
mkdir -p backend/data/dataset/raw

# 复制录像文件
cp C:\Riot\Games\League\of\Legends\Replays\*.rofl backend/data/dataset/raw/

# 或批量重命名
# 按英雄分类：Lux_001.rofl, Lux_002.rofl, ...
```

#### 优点
- ✅ 100%大乱斗模式
- ✅ 可以自己控制质量（打得越好，数据越好）
- ✅ 自己常用英雄
- ✅ 完全免费
- ✅ 不需要筛选
- ✅ 知道对局具体情况
- ✅ 可以针对性训练

#### 缺点
- ❌ 需要时间（150-300局，每局20分钟 = 50-100小时）
- ❌ 水平可能不够高
- ❌ 需要持续玩
- ❌ 单人收集较慢

#### 适用场景
- 主要数据来源
- 针对自己英雄的训练
- 个性化数据
- 持续改进训练

#### 加速方案

**方案1：找朋友/队友帮忙录制**
- 邀请高水平朋友
- 多排录制
- 分享各自录像

**方案2：雇佣代练（付费）**
- 雇佣钻石以上代练
- 指定英雄和局数
- 质量有保证

**方案3：使用训练模式**
- 快速积累基础操作
- 虽然不是真实对局
- 但可用于V1训练

**方案4：双开录制**
- 多账号同时录制
- 借用朋友账号
- 大规模收集

---

### 4. 🤝 社区分享

**来源**：各种社区论坛

#### Reddit
- **板块**：r/LeagueReplays（录像分享）
- **搜索关键词**：
  - "ARAM replay"
  - "ARAM montage"
  - "ARAM gameplay"
- **获取方式**：
  - 浏览帖子
  - 私信玩家
  - 索要录像文件

#### NGA论坛（中文社区）
- **板块**：
  - 英雄联盟区
  - 视频分享版块
  - 技术讨论版块
- **搜索关键词**：
  - "大乱斗 录像"
  - "ARAM 回放"
  - "大乱斗 视频"

#### Discord
- **服务器**：
  - 英雄联盟AI相关社区
  - 大乱斗专精群
  - 游戏数据分析群
- **频道**：
  - #replay-sharing
  - #aram-gameplay
  - #data-exchange

#### 优点
- ✅ 可能有高质量对局
- ✅ 免费
- ✅ 多样化
- ✅ 可以交流学习

#### 缺点
- ❌ 需要大量筛选
- ❌ 质量参差不齐
- ❌ 难找到大量数据
- ❌ 获取过程复杂
- ❌ 可能需要建立联系

#### 适用场景
- 补充数据
- 找到特殊对局（如五杀）
- 学习不同打法
- 交流经验

---

### 5. 🎥 主播/职业选手录像

#### Twitch
- **找大乱斗专精主播**
- **下载录像**
- **提取游戏录像文件**
- **工具**：
  - Twitch Leecher（下载录像）
  - Replay Extractor（提取.rofl文件）

#### 斗鱼/虎牙（中文）
- **找大乱斗主播**
- **联系主播索要录像**
- **可能需要付费**

#### LCK/LPL官方录像
- **职业比赛录像**
- **但职业比赛不玩大乱斗**
- **仅供参考，不适合直接使用**

#### 优点
- ✅ 水平极高（职业选手）
- ✅ 英雄池深
- ✅ 打法多样

#### 缺点
- ❌ 很少有大乱斗录像
- ❌ 可能需要版权
- ❌ 难获取原始.rofl文件
- ❌ 可能涉及法律问题

#### 适用场景
- 学习高水平操作
- 少量高质量数据
- 研究职业选手思路

---

## 📊 数据来源对比表

| 来源 | 质量 | 数量 | 大乱斗 | 英雄 | 获取难度 | 推荐度 | 适用阶段 |
|------|------|------|-------|------|---------|-------|---------|
| **TLoL** | ⭐⭐⭐⭐⭐ | 833局 | ❌ | 1个 | 简单 | ⭐⭐⭐ | 测试/学习 |
| **HuggingFace** | ⭐⭐⭐ | 700k+ | 可能 | 所有 | 中等 | ⭐⭐⭐⭐⭐ | V2+/扩展 |
| **自己录制** | ⭐⭐⭐⭐ | 150-300局 | ✅ | 10-15个 | 简单 | ⭐⭐⭐⭐⭐ | 所有阶段 |
| **社区分享** | ⭐⭐ | 不定 | 可能 | 不定 | 困难 | ⭐⭐ | 补充 |
| **主播/职业** | ⭐⭐⭐⭐⭐ | 少量 | ❌ | 多 | 极难 | ⭐⭐ | 学习 |

---

## 🎯 推荐方案：混合使用

### 方案A：自己录制为主（适合时间充足）

**数据组成**：
- **自己录制**：150-300局（主要，100%）
- **TLoL数据集**：833局（辅助学习，不用于训练）
- **社区分享**：50-100局（补充，可选）

**优点**：
- ✅ 100%大乱斗
- ✅ 完全可控
- ✅ 有辅助数据用于测试
- ✅ 针对性最强

**缺点**：
- ❌ 需要大量时间（100+小时）
- ❌ 收集周期长

**适合**：
- 有时间玩游戏
- 大乱斗玩家
- 想要个性化AI
- 追求完美数据

**实施步骤**：
1. 开启自动录像
2. 每天玩5-10局（持续1-2个月）
3. 定期复制录像文件
4. 下载TLoL用于代码测试
5. 逐步收集到目标数量

**时间估算**：
- 每天玩5局 × 30天 = 150局
- 每天玩10局 × 30天 = 300局
- 预计耗时：1-2个月

---

### 方案B：开源数据为主（适合快速开始）

**数据组成**：
- **HuggingFace数据集**：筛选100-200局大乱斗（70%）
- **自己录制**：50-100局（30%，验证和补充）
- **TLoL**：833局（测试，不用于训练）

**优点**：
- ✅ 快速获得大量数据
- ✅ 质量有保证
- ✅ 省时间
- ✅ 英雄覆盖广

**缺点**：
- ❌ 需要筛选大乱斗
- ❌ 可能需要硬盘空间
- ❌ 数据清洗工作量大

**适合**：
- 想快速开始
- 硬盘空间充足
- 数据处理能力强
- 急需开始训练

**实施步骤**：
1. 注册HuggingFace账号
2. 下载并筛选大乱斗数据（100-200局）
3. 同时自己录制50-100局
4. 下载TLoL用于测试
5. 数据清洗和验证

**时间估算**：
- 数据下载和筛选：1-2天
- 自己录制：5-10天
- 总计：1-2周

**硬盘需求**：
- HuggingFace部分：约50-100GB
- 自己录制：约5-10GB
- 总计：约100GB

---

### 方案C：雇佣/合作（适合资金充足）

**数据组成**：
- **雇佣代练**：200-300局大乱斗（80%，高质量）
- **自己录制**：50-100局（20%，验证）
- **开源数据**：补充（可选）

**优点**：
- ✅ 质量极高（代练水平）
- ✅ 节省时间
- ✅ 多英雄
- ✅ 快速获得大量数据

**缺点**：
- ❌ 需要付费
- ❌ 可能需要信任
- ❌ 费用较高

**适合**：
- 有预算
- 时间紧张
- 追求高质量
- 不想自己玩

**实施步骤**：
1. 寻找靠谱的代练（钻石以上）
2. 商定价格和服务（英雄数、局数）
3. 跟踪录制进度
4. 自己录制验证数据
5. 验收数据质量

**费用估算**（仅供参考）：
- 代练费用：10-30元/局
- 250局 × 20元/局 = 5000元
- 预计总费用：3000-8000元

**时间估算**：
- 代练录制：1-2周
- 自己录制：5-10天
- 总计：2-3周

---

## 💡 实用建议

### 1. 分阶段收集数据

#### 阶段1（V1训练）：基础操作
- **自己录制**：50-100局
- **英雄**：2-4个常用英雄
- **重点**：移动、普攻、补刀
- **时间**：1-2周

#### 阶段2（V2训练）：单个技能
- **继续录制**：50-100局
- **英雄**：扩展到5-8个英雄
- **重点**：Q/W/E技能释放
- **时间**：1-2周

#### 阶段3（V3训练）：技能组合
- **录制或开源数据**：50-100局
- **英雄**：扩展到10-15个英雄
- **重点**：技能连招、配合
- **时间**：1-2周

#### 阶段4（V4+训练）：完整技能
- **大量开源数据**：100-200局
- **英雄**：15个英雄
- **重点**：完整技能体系
- **时间**：2-4周

### 2. 数据质量优先

**优先保证**：
- ✅ 打得好（KDA高、胜率高）
- ✅ 视频清晰（无卡顿、无掉帧）
- ✅ 完整对局（无中途退出）
- ✅ 正常对局（无外挂、无作弊）

**避免收集**：
- ❌ 低质量对局（送人头、挂机）
- ❌ 异常对局（卡顿、掉线）
- ❌ 不完整对局（中途退出）
- ❌ 疑似外挂对局

### 3. 自动化收集

**可以开发脚本**：
```python
# 自动检测录像文件生成
import os
import shutil
from datetime import datetime

def collect_replays(source_dir, target_dir):
    """收集录像文件"""
    for file in os.listdir(source_dir):
        if file.endswith('.rofl'):
            # 提取信息（日期、英雄等）
            # 重命名文件
            # 复制到项目目录
            pass

# 可以设置为定时任务，每天自动收集
```

**自动化工具**：
- 文件监控（监控Replays目录）
- 自动复制到项目目录
- 自动重命名（英雄_日期_结果.rofl）
- 自动统计（英雄、胜率、KDA）

### 4. 数据管理

**文件命名规范**：
```
Lux_20240120_W_Diamond.rofl
^英雄 ^日期   ^结果 ^段位

Lux_001.rofl
^英雄 ^序号

20240120_Lux_25-5-12_W.rofl
^日期  ^英雄 ^KDA      ^结果
```

**目录结构**：
```
backend/data/dataset/raw/
├── by_hero/
│   ├── Lux/
│   │   ├── Lux_001.rofl
│   │   ├── Lux_002.rofl
│   │   └── ...
│   ├── Ahri/
│   │   ├── Ahri_001.rofl
│   │   └── ...
│   └── ...
├── by_date/
│   ├── 20240120/
│   │   ├── Lux_W_Diamond.rofl
│   │   └── ...
│   └── ...
└── all/
    ├── all_001.rofl
    └── ...
```

### 5. 数据备份

**重要**：
- 备份原始录像文件
- 备份到多个位置（云盘、硬盘）
- 定期检查备份完整性

**备份策略**：
- 原始位置：`C:\Riot Games\League of Legends\Replays\`
- 项目位置：`backend/data/dataset/raw/`
- 云盘备份：百度云/Google Drive
- 外部硬盘：定期复制

---

## 🚀 立即行动建议

### 如果你想快速开始：

**推荐方案**：方案B（开源数据为主）

**具体步骤**：
1. **今天**：注册HuggingFace账号
2. **今天**：下载TLoL数据集（用于测试代码）
3. **第1-2天**：筛选HuggingFace中的50-100局大乱斗
4. **同时**：开启游戏自动录像
5. **第3-10天**：录制50-100局大乱斗
6. **第11-14天**：数据清洗和验证
7. **第15天**：开始训练

**预期结果**：
- 2周内获得150-200局高质量大乱斗录像
- 可以开始V1训练

---

### 如果你想质量第一：

**推荐方案**：方案A（自己录制为主）

**具体步骤**：
1. **今天**：开启游戏自动录像
2. **今天**：下载TLoL数据集（用于测试代码）
3. **第1天**：录制5-10局（熟悉流程）
4. **第1-30天**：每天录制5-10局大乱斗
5. **同时**：邀请朋友/队友帮忙录制
6. **第31-60天**：持续录制，达到150-300局
7. **第61天**：数据整理和验证
8. **第62天**：开始训练

**预期结果**：
- 2个月内获得150-300局高质量大乱斗录像
- 完全个性化数据

---

### 如果你想平衡：

**推荐方案**：混合方案

**具体步骤**：
1. **今天**：开启游戏自动录像
2. **今天**：注册HuggingFace账号
3. **第1-2天**：下载TLoL（测试用）
4. **第3-4天**：筛选HuggingFace中的50-100局大乱斗
5. **第3-20天**：录制100-150局大乱斗
6. **第21-22天**：合并和清洗数据
7. **第23天**：开始训练

**预期结果**：
- 3周内获得150-250局大乱斗录像
- 平衡质量和速度

---

## 📝 数据收集检查清单

### 开始前
- [ ] 确定收集方案（A/B/C或混合）
- [ ] 准备存储空间（至少100GB）
- [ ] 准备时间预算
- [ ] 准备预算（如需付费）

### 收集过程
- [ ] 开启游戏自动录像
- [ ] 确定目标英雄列表
- [ ] 制定录制计划（每日局数）
- [ ] 记录每局基本信息
- [ ] 定期检查录像文件完整性

### 数据整理
- [ ] 复制录像文件到项目目录
- [ ] 按英雄分类
- [ ] 重命名文件（统一格式）
- [ ] 统计数据（局数、英雄、胜率）
- [ ] 备份数据

### 数据验证
- [ ] 检查文件是否可读取
- [ ] 检查文件是否完整
- [ ] 随机抽查几局质量
- [ ] 识别低质量对局（可选剔除）

---

## 🔗 相关资源

### 数据下载链接
- TLoL: https://github.com/MiscellaneousStuff/tlol
- HuggingFace: https://huggingface.co/datasets/maknee/league-of-legends-decoded-replay-packets

### 社区链接
- Reddit: https://reddit.com/r/LeagueReplays
- NGA论坛: https://bbs.nga.cn/

### 工具链接
- Twitch Leecher（下载录像）
- lol-replay-parser（解析录像）

---

## ⚠️ 注意事项

### 法律和道德
- ⚠️ 不使用外挂录制
- ⚠️ 不侵犯他人隐私
- ⚠️ 遵守游戏服务条款
- ⚠️ 雇佣代练需谨慎

### 技术注意事项
- ⚠️ 定期检查录像文件损坏
- ⚠️ 备份重要数据
- ⚠️ 注意硬盘空间
- ⚠️ 大量文件可能需要很长时间处理

### 质量控制
- ⚠️ 优先收集高质量对局
- ⚠️ 避免收集低质量对局
- ⚠️ 定期检查数据质量
- ⚠️ 剔除异常对局

---

## 📞 后续支持

如果在数据收集过程中遇到问题：
1. 查看本文档的各个章节
2. 参考项目其他文档
3. 搜索相关社区
4. 联系项目维护者

---

**文档版本**: 1.0
**创建日期**: 2026-01-20
**最后更新**: 2026-01-20
